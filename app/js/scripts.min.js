
(function () {
  'use strict';
  let menu = document.querySelector('.menu');
  let menuMobile = document.querySelector('.menu-mobile');

  let openMenu = () => {
    menuMobile.classList.add('menu-mobile__opened');
    menu.classList.add('menu__opened');
    window.addEventListener('keydown',onEscPress);
    menuMobile.addEventListener('keydown',onEnterPress)
  };

  let closeMenu = () => {
    menuMobile.classList.remove('menu-mobile__opened');
    menu.classList.remove('menu__opened');
    window.removeEventListener('keydown',onEscPress);
  };

  let onEscPress = (event) => {
    if (event.code === 'Escape'){
      closeMenu();
    }
  };

  let onEnterPress = () => {
    if (event.code === 'Enter' && menuMobile.classList.contains('menu-mobile__opened')){
      closeMenu();
    }else if(event.code === 'Enter'){
      openMenu();
    }
  };

  menuMobile.addEventListener('click',function () {
    if (menuMobile.classList.contains('menu-mobile__opened')) closeMenu();
    else openMenu();
  });
  menuMobile.addEventListener('keydown',onEnterPress)
})();
(function () {
  class Carousel{
    constructor({width,count}){
      this.width = width;
      this.count = count;
      this.position = 0;
      this.elements = document.body.querySelectorAll('.slider__item');
      this.list = document.body.querySelector('.slider__container');
      this.prevButton = document.body.querySelector('.slider__button--left');
      this.nextButton = document.body.querySelector('.slider__button--right');
      this.prevButton.onclick =  this.prevImage.bind(this);
      this.nextButton.onclick =  () => this.nextImage();
      this.list.onmousedown = (event) => this.mouseMove(event);
    }
    prevImage(){
      this.position = Math.min(this.position + this.width * this.count,0);
      this.list.style.marginLeft = this.position + 'px'
    }
    nextImage(){
      this.position = Math.max(this.position - this.width * this.count , (-this.width * this.elements.length) + (this.width * this.count));
      this.list.style.marginLeft = this.position + 'px'
    }
    mouseMove(event){
      this.mouseCoordX = event.clientX;
      this.list.onmouseup = (ev) => this.mouseUp(ev);
    }
    mouseUp(ev){
      (ev.clientX < this.mouseCoordX) ? this.nextImage() : (ev.clientX > this.mouseCoordX) ? this.prevImage() : 0;
    }
  }

  let widthItem = 121.5;
  let getCount = () => (document.body.offsetWidth < 1116 && document.body.offsetWidth > 976)
      ? 2 : (document.body.offsetWidth < 976 && document.body.offsetWidth > 796)
          ? 1 : (document.body.offsetWidth < 796 && document.body.offsetWidth > 576)
              ? 4 : (document.body.offsetWidth < 576) ? 2 : 3;

  let carousel = new Carousel({
    width: widthItem,
    count: getCount()
  });
})();
(function () {
  let container = document.querySelector('.slider__container');
  let modalBlock = document.querySelector('.modal');
  let modalImage = modalBlock.querySelector('.modal__image');
  let modalClose = modalBlock.querySelector('.modal__close');

  function positionClose(){
    modalClose.style.left = modalImage.clientWidth + modalImage.getBoundingClientRect().left - 50  + 'px';
    modalClose.style.top = modalImage.getBoundingClientRect().top + 15 + 'px'
  }

  function closeModal(){
    modalBlock.style.display = 'none';
    modalImage.src = '';
  }

  function onEscPress(event){
    if(event.code === 'Escape'){
      closeModal();
      window.removeEventListener('keydown',onEscPress);
    }
  }

  container.addEventListener('click',function (event) {
    event.preventDefault();
    if(event.target.nodeName === 'IMG'){
      modalBlock.style.display = 'block';
      modalImage.src = event.target.dataset.src;
      modalImage.addEventListener('load',positionClose);
      modalClose.addEventListener('click',closeModal);
      window.addEventListener('keydown',onEscPress);
    }
  });

})();
'use strict';

(function() {

	// Custom JS

})();
